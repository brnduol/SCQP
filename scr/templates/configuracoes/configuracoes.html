<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="foo" />
    <meta name="keywords" content="foo,bar" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="UTF-8" />
    <title>Configurações</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/configuracoes.css') }}"
    />
  </head>
  <body>
    <div class="header">
      <div class="header-left">
        <a href="{{url_for('home')}}" class="scpq-text" title="Logout">SCPQ</a>
        <span class="greeting">Olá {{nome}}</span>
      </div>
      <div class="header-right">
        <a href="/logout" class="logout-icon" title="Logout">
          <svg
            width="28"
            height="28"
            viewBox="0 0 24 24"
            fill="none"
            stroke="#2d4966"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
            <polyline points="16 17 21 12 16 7" />
            <line x1="21" y1="12" x2="9" y2="12" />
          </svg>
        </a>
      </div>
    </div>
   <body>
  <div class="container">
<img src="{{ url_for('user_image') }}" height="140" width="140" class="profile-pic" id="profilePicPreview" alt="Foto do usuário">
    <form method="post" enctype="multipart/form-data" action="{{ url_for('perfil') }}">
        <input type="file" name="profile_pic" accept="image/jpeg" onchange="previewImage(event)">
        <input type="text" name="nome" placeholder="{{nome}}" required>
        <input type="email" name="email" placeholder="{{email}}" required>
        {% if discente %}
        <div class="custom-select-wrapper">
          <select name="id_curso" id="id_curso" required>
            <option value="">Selecione um Curso</option>
            {% for c in cursos %}
                <option value="{{ c.id }}">{{ c.nome }}</option>
            {% endfor %}
          </select>
          <span class="select-icon">
            <!-- SVG for a down arrow (chevron) -->
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M6 8l4 4 4-4" stroke="#888" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </span>
        </div>
        {%endif%}
        <input type="password" name="senha_atual" placeholder="Senha atual" required>
        <input type="password" name="nova_senha" placeholder="Nova senha">
        <input type="password" name="confirmar_nova_senha" placeholder="Confirmar nova senha">
        <button type="submit">Salvar</button>
    </form>
    <form method="post" action="{{ url_for('delete_account') }}" onsubmit="return confirm('Tem certeza que deseja deletar sua conta? Esta ação não pode ser desfeita.')">
        <button type="submit" class="delete-account">Deletar Conta</button>
    </form>
</div>

    <script>
        function previewImage(event) {
            const reader = new FileReader();
            reader.onload = function(){
                const output = document.getElementById('profilePicPreview');
                output.src = reader.result;
            };
            reader.readAsDataURL(event.target.files[0]);
        }
    </script>
</body>
  </body>
</html>